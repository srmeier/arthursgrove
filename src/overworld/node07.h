//-----------------------------------------------------------------------------
#ifndef _NODE07_HEADER_
#define _NODE07_HEADER_

/* node07.h */
//-----------------------------------------------------------------------------
/*
*/
class Node07: public WorldNode {
protected:
	Npc01Entity* _npc00;

	void _drawEntities(void);

public:
	Node07(void);
	~Node07(void);

	void update(void);

	Entity* getEntityAt(int i, int j);
};

/* node07.cpp */
//-----------------------------------------------------------------------------
/*
*/
Node07::Node07(void) {
	int tiles[15][20] = {
		{0x08,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x09},
		{0x0C,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x16,0x0D},
		{0x0A,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0F,0x0B},
		{0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x37},
		{0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x35,0x35,0x35,0x35,0x35,0x35,0x35,0x36,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38},
		{0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2E,0x2F,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x38}
	};

	for(int j=0; j<15; j++) {
		for(int i=0; i<20; i++) {
			_background[j][i] = tiles[j][i];
		}
	}

	_npc00 = new Npc01Entity(16*18, 16*7);
}

//-----------------------------------------------------------------------------
/*
*/
Node07::~Node07(void) {
	delete _npc00;
}

//-----------------------------------------------------------------------------
/*
*/
void Node07::update(void) {
	WorldNode::update();
	
	int pi = _player->getI();
	int pj = _player->getJ();

	_npc00->update();
}

//-----------------------------------------------------------------------------
/*
*/
void Node07::_drawEntities(void) {
	_npc00->draw();
}

//-----------------------------------------------------------------------------
/*
*/
Entity* Node07::getEntityAt(int i, int j) {
	int ni = _npc00->getI();
	int nj = _npc00->getJ();

	if(i==ni&&j==nj) return _npc00;
	else return NULL;
}


#endif
